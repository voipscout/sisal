#!/usr/bin/env ruby

require_relative '../lib/sisal'

if ARGV.size < 3
  puts "Usage: sisal_test auth_token mobile_number text"
  puts "Example: sisal_test 123adf 554800001111 OHAI"
  exit 1
end

# provider = Sisal::Providers::TropoProvider.new(ARGV.shift)
provider = Sisal::Providers::ClickatellProvider.new(ARGV.shift)
message = Sisal::Message.new(ARGV.shift, ARGV.join(' '))
response = provider.send message
puts response.inspect